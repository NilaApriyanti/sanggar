(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"7e6b":function(a,t,e){"use strict";e.r(t);var l=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",{staticClass:"q-mt-lg q-mb-lg",attrs:{padding:""}},[e("link",{attrs:{rel:"stylesheet",href:"https://unpkg.com/leaflet-geosearch@2.6.0/assets/css/leaflet.css"}}),e("div",{staticClass:"row full-width q-mb-md"},[e("div",{staticClass:"col-xs-4"},[e("q-avatar",{attrs:{size:"100px","font-size":"52px"}},[e("q-img",{attrs:{src:null===a.gambarNow||void 0===a.gambarNow?"https://placeimg.com/500/300/nature":a.$baseURL+a.gambarNow,ratio:"1"}},[a.isMyProfile?e("div",{staticClass:"absolute-bottom flex flex-center"},[e("q-icon",{attrs:{color:"white",size:"md",name:"camera_alt"},on:{click:function(t){a.modalChangeimageProfile=!0}}})],1):a._e()])],1)],1),e("div",{staticClass:"col-xs-8"},[e("div",{staticClass:"text-h6"},[a._v(a._s(a.namaSanggar))]),e("div",{staticClass:"text-subtitle1"},[e("q-icon",{attrs:{name:"fas f-map-marker-alt"}}),a._v(a._s(a.alamat))],1),e("div",{staticClass:"text-subtitle1"},[e("q-icon",{attrs:{name:"fas fa-phone-alt"}}),a._v(" "+a._s(a.noTelp))],1)])]),a.isMyProfile?e("div",{staticClass:"row q-gutter-md q-mb-md"},[e("div",{staticClass:"col"},[e("q-btn",{staticClass:"full-width q-mt-md",attrs:{unelevated:"",color:"primary"},on:{click:function(t){a.modalUpdate=!0}}},[a._v("Edit Profile")])],1),e("div",{staticClass:"col"},[e("q-btn",{staticClass:"full-width q-mt-md",attrs:{unelevated:"",color:"primary"},on:{click:function(t){return a.logout()}}},[a._v("Logout")])],1)]):a._e(),e("div",{staticClass:"map"}),e("q-card",{staticStyle:{flex:"3"}},[a.loaded?e("l-map",{staticStyle:{height:"300px"},attrs:{zoom:a.zoom,center:a.center}},[e("l-tile-layer",{attrs:{url:a.url,attribution:a.attribution}}),e("l-marker",{attrs:{"lat-lng":a.markerLatLng}},[e("l-popup",[a._v("Lokasi Kamu")])],1)],1):a._e()],1),e("div",{staticClass:"row full-width q-mt-md"},a._l(a.list,(function(t,l){return e("div",{key:l,staticClass:"col-xs-4"},[e("q-card",{staticClass:"my-card q-pa-xs bg-white text-black",attrs:{flat:""}},[e("q-img",{attrs:{src:a.$baseURL+t.gambar,ratio:1},on:{click:function(e){return a.goToDetail(t._id)}}})],1)],1)})),0),e("vs-prompt",{attrs:{color:"success","accept-text":"Ubah",title:"Ubah Gambar Profile",active:a.modalChangeimageProfile},on:{accept:function(t){return a.sendGambar()},"update:active":function(t){a.modalChangeimageProfile=t}}},[e("div",{staticClass:"con-exemple-prompt"},[e("q-file",{ref:"file",attrs:{color:"teal",filled:"",label:"Label"},on:{input:a.selectFile},scopedSlots:a._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"cloud_upload"}})]},proxy:!0}]),model:{value:a.image,callback:function(t){a.image=t},expression:"image"}}),e("div",{staticClass:"row q-mt-md items-center justify-center fill-width"},[null!==a.preview?e("q-avatar",{attrs:{size:"200px","font-size":"52px"}},[e("q-img",{attrs:{src:a.preview}})],1):a._e()],1),e("vs-alert",{staticClass:"q-mt-md",attrs:{color:"success",icon:"new_releases"}},[a._v("\n        Silahkan Ubah Gambar Profil Anda\n      ")])],1)]),e("vs-prompt",{attrs:{color:"success","accept-text":"Ubah",title:"Ubah Profile",active:a.modalUpdate},on:{accept:function(t){return a.updateProfile()},"update:active":function(t){a.modalUpdate=t}}},[e("div",{staticClass:"con-exemple-prompt q-gutter-md"},[e("q-input",{attrs:{filled:"",label:"Alamat"},model:{value:a.alamat,callback:function(t){a.alamat=t},expression:"alamat"}}),e("q-input",{attrs:{filled:"",label:"No Telp"},model:{value:a.noTelp,callback:function(t){a.noTelp=t},expression:"noTelp"}}),e("vs-alert",{staticClass:"q-mt-md",attrs:{color:"success",icon:"new_releases"}},[a._v("\n        Silahkan Ubah Profil Anda\n      ")])],1)])],1)},s=[],i=e("2699"),o=e("a40a"),r=e("4e2b"),n=e("f60f"),c=e("e11e"),m=e.n(c),d=(e("6cc5"),!1),g={name:"Map",components:{LMap:i["a"],LTileLayer:o["a"],LMarker:r["a"],LPopup:n["a"]},data:function(){return{modalUpdate:!1,list:null,search:d,markerLatLng:[],zoom:15,center:null,image:null,url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',namaSanggar:"",alamat:"",noTelp:"",loaded:!1,modalChangeimageProfile:!1,preview:null,gambarNow:null,isMyProfile:!1}},created:function(){this.isMyProfile=this.$route.params.id===this.$q.localStorage.getItem("data")._id,this.getData(),this.getProfile()},methods:{selectFile:function(a){var t=a,e=URL.createObjectURL(t);this.preview=e},get:function(a){this.markerLatLng=[a.latlng.lat,a.latlng.lng]},getProfile:function(){var a=this,t=this.$q.localStorage.getItem("data");if(this.$route.params.id===t._id){this.namaSanggar=t.username,this.alamat=t.alamat.keterangan,this.noTelp=t.notelp,this.gambarNow=t.gambar;var e=t.alamat.lat,l=t.alamat.long;this.markerLatLng=[e,l],this.center=m.a.latLng(e,l),this.loaded=!0}else try{this.$axios.get("user/getprofile/"+this.$route.params.id).then((function(t){if(t.data.sukses){var e=t.data.data;a.namaSanggar=e.username,a.alamat=e.alamat.keterangan,a.gambarNow=e.gambar,a.noTelp=e.notelp;var l=e.alamat.lat,s=e.alamat.long;a.markerLatLng=[l,s],a.center=m.a.latLng(l,s),a.loaded=!0}else a.$show("Gagal Memuat Profile","negative")}))}catch(s){this.$show("Gagal Memuat Profile","negative")}},getData:function(){var a=this;try{var t,e=this.$q.localStorage.getItem("data");t=this.$route.params.id===e._id?e.username:this.$route.params.username,this.$axios("gambar/getdatabyuser/"+t).then((function(t){t.data.sukses?a.list=t.data.data:a.$show(t.data.msg,"negative")}))}catch(l){this.$show("Terjadi Kesalahan","negative")}},goToDetail:function(a){this.$router.push({name:"detailPosting",params:{id:a}})},logout:function(){this.$q.localStorage.clear(),this.$router.push("/login")},sendGambar:function(){var a=this;try{var t=new FormData;t.append("gambar",this.image),this.$axios.post("user/uploadprofile/"+this.$q.localStorage.getItem("data")._id,t).then((function(t){t.data.sukses?(a.$q.localStorage.set("data",t.data.user),a.$show(t.data.msg,"positive"),a.getData(),a.getProfile()):a.$show(t.data.msg,"negative")}))}catch(e){this.$show("Gagal Upload Profile","negative")}},updateProfile:function(){var a=this;try{var t=this.$q.localStorage.getItem("data"),e=t.alamat.lat,l=t.alamat.long;this.$axios.post("user/updateprofile/"+this.$q.localStorage.getItem("data")._id,{alamat:{keterangan:this.alamat,lat:e,long:l},notelp:this.notelp}).then((function(t){a.loaded=!1,t.data.sukses?(a.$q.localStorage.clear(),a.$q.localStorage.set("data",t.data.data),a.$show(t.data.msg,"positive"),a.getData(),a.getProfile()):a.$show(t.data.msg,"negative"),a.loaded=!0}))}catch(s){this.$show("Gagal Upload Profile","negative")}}}},u=g,p=e("2877"),h=Object(p["a"])(u,l,s,!1,null,null,null);t["default"]=h.exports}}]);